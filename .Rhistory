package.skelton()
install.packages("skeleton")
library(skeleton)
librarby(shiny)
library(shiny)
runExample("01_hello")
runExample("02_text")
library(foreign)
read.dct <- function(dct, labels.included = "yes") {
temp <- readLines(dct)
temp <- temp[grepl("_column", temp)]
switch(labels.included,
yes = {
pattern <- "_column\\(([0-9]+)\\)\\s+([a-z0-9]+)\\s+(.*)\\s+%([0-9]+)[a-z]\\s+(.*)"
classes <- c("numeric", "character", "character", "numeric", "character")
N <- 5
NAMES <- c("StartPos", "Str", "ColName", "ColWidth", "ColLabel")
},
no = {
pattern <- "_column\\(([0-9]+)\\)\\s+([a-z0-9]+)\\s+(.*)\\s+%([0-9]+).*"
classes <- c("numeric", "character", "character", "numeric")
N <- 4
NAMES <- c("StartPos", "Str", "ColName", "ColWidth")
})
temp_metadata <- setNames(lapply(1:N, function(x) {
out <- gsub(pattern, paste("\\", x, sep = ""), temp)
out <- gsub("^\\s+|\\s+$", "", out)
out <- gsub('\"', "", out, fixed = TRUE)
class(out) <- classes[x] ; out }), NAMES)
temp_metadata[["ColName"]] <- make.names(gsub("\\s", "", temp_metadata[["ColName"]]))
temp_metadata
}
read.dat <- function(dat, metadata_var, labels.included = "yes") {
read.fwf(dat, widths = metadata_var[["ColWidth"]], col.names = metadata_var[["ColName"]])
}
GSS_dta <- read.dta("/var/www/apps/olds/releases/2015-12-31_03-14/public/system/extracts/4457/Marriage/GSS.dta", convert.dates = TRUE, convert.factors = TRUE, missing.type = FALSE, convert.underscore = FALSE, warn.missing.labels = TRUE)
GSS_dta <- read.dta("GSS.dat", convert.dates = TRUE, convert.factors = TRUE, missing.type = FALSE, convert.underscore = FALSE, warn.missing.labels = TRUE)
GSS_dta <- read.dta("./data/GSS.dat", convert.dates = TRUE, convert.factors = TRUE, missing.type = FALSE, convert.underscore = FALSE, warn.missing.labels = TRUE)
GSS_dta <- read.dta("./data/GSS.dta", convert.dates = TRUE, convert.factors = TRUE, missing.type = FALSE, convert.underscore = FALSE, warn.missing.labels = TRUE)
GSS_dta <- read.dta("../data/GSS.dta", convert.dates = TRUE, convert.factors = TRUE, missing.type = FALSE, convert.underscore = FALSE, warn.missing.labels = TRUE)
GSS_metadata <- read.dct("./GSS.dct")
GSS_metadata <- read.dct(".data/GSS.dct")
GSS_metadata <- read.dct("./data/GSS.dct")
GSS_ascii <- read.dat("./data/GSS.dat", GSS_metadata)
attr(GSS_ascii, "col.label") <- GSS_metadata[["ColLabel"]]
GSS <- GSS_ascii
View(GSS)
sumarry(GSS)
summary(GSS)
library(dplyr)
dataset <- GSS %>% select(YEAR, MARITAL, AGEWED, DIVORCE, SPHRS2)
View(dataset)
write.csv(datatset, "GSSdata")
?wite.csv
?write.csv()
write.csv(dataset, "GSSdata")
tmpdataset <- filter(GSS, AGEWED > 8)
View(tmpdataset)
tmpdataset <- filter(dataset, AGEWED > 8)
write.csv(tmpdataset, "GSSdata")
summary(GSSdata)
read.csv(GSSdata)
getwd()
data <- read.csv("GSSdata")
summary(data)
ploy(data$SPHRS2)
plot(data$SPHRS2)
library(dplyr)
data <- filter(SPHRS2>1)
data <- filter(data,SPHRS2>1)
View(data)
data <- filter(data, SPHRS2<99)
View(data)
mean(data$SPHRS2)
plot(data$YEAR, data$DIVORCE)
library("readr")
install.packages("readr")
library("readr")
my.df = read_csv("https://raw.githubusercontent.com/sebastianbarfort/sds/master/data/marijuana-street-price-clean.csv")
library("ggplot2")
library("scales")
p = ggplot(my.df, aes(x = date, y = HighQ))
p = p + geom_point(alpha = .05) # add points
p = p + geom_line() # add points
p = p + geom_smooth(colour = "red")
p = p + facet_wrap(~ State, scales = "free_y")
p = p + scale_x_date(breaks = pretty_breaks(4))
p = p + labs(x = NULL, y = "Price ($)", title = "Price of Marijuana")
p
View(my.df)
str(my.df)
class(my.df)
data <- tbl_df((my.df))
daya
data
data <- filter(data, -c(HighQN, MedQN, LowQN))
data <- select(data, -c(HighQN, MedQN, LowQN))
data
dataByMonth <- data %>% group_by(State, date)
View(dataByMonth)
dataByMonth <- group_by(State, date())
dataByMonth <- data %>% group_by(State, date())
View(dataByMonth)
dataByMonth <- data %>% group_by(State, date)
plot(data$date, data$State="Maryland")
dataMD <- data %>% filter(State=Maryland)
dataMD <- data %>% filter(State="Maryland")
View(data)
dataMD <- filter(data, State="Maryland")
data_MD <- filter(data, State=="Maryland")
View(data_MD)
data_MD <- arrange(data_MD, date)
View(data_MD)
plot(data_MD$date, data_MD$HighQ)
library(lubridate)
rawData = read_csv("https://raw.githubusercontent.com/sebastianbarfort/sds/master/data/marijuana-street-price-clean.csv")
data <- tbl_df((rawData))
data <- select(data, -c(HighQN, MedQN, LowQN))
View(data)
data$monthYearCol <- mutate(paste(month(date, label=TRUE), " - ", Year(date))
)
tmpdate <- as.date(2012-01-01)
tmpdate <- as.date(2012-01-01)
tmpdate <- as.Date(2012-01-01)
tmpdate <- as.Date("2012-01-01")
year <- Year(tmpdate)
year <- year(tmpdate)
month <- month(tmpdate)
comb <- paste(month, year, sep = " - ")
month <- month(tmpdate, label=TRUE)
comb <- paste(month, year, sep = " - ")
createDateFormat <- function{}
formatDateFunction <- function(tmpDate){
tmpMonth <- month(tmpDate, labels=TRUE)
tmpYear <- year(tmpDate)
return(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(tmpDate)
year <- year(tmpdate)
month <- month(tmpdate, label=TRUE)
comb <- paste(month, year, sep = " - ")
comb <- paste(month, year, sep = "-")
formatDateFunction <- function(tmpDate){
tmpMonth <- month(tmpDate, labels=TRUE)
tmpYear <- year(tmpDate)
return(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(tmpDate)
formatDateFunction <- function(tmpDate, ...){
tmpMonth <- month(tmpDate, labels=TRUE)
tmpYear <- year(tmpDate)
return(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(tmpDate)
formatDateFunction <- function(tmpDate){
#tmpMonth <- month(tmpDate, labels=TRUE)
tmpYear <- year(tmpDate)
return(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(tmpDate)
formatDateFunction(2012-01-01)
formatDateFunction(as.Date(2012-01-01))
aDate <- as.Date("2012-01-01")
formatDateFunction(as.Date("2012-01-01"))
formatDateFunction <- function(tmpDate){
tmpMonth <- month(tmpDate, labels=TRUE)
tmpYear <- year(tmpDate)
(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(as.Date("2012-01-01"))
formatDateFunction <- function(tmpDate){
tmpMonth <- month(tmpDate)
tmpYear <- year(tmpDate)
(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(as.Date("2012-01-01"))
formatDateFunction <- function(tmpDate){
tmpMonth <- lubridate::month(tmpDate, labels = TRUE)
tmpYear <- lubridate::year(tmpDate)
(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(as.Date("2012-01-01"))
month.Name(as.Date("12-02-02"))
month.abb(as.Date("12-02-02"))
month.name(12)
am <- format(asDate("12-02-02"), %B)
am <- format(asDate("12-02-02"), format = "%B")
am <- format(as.Date("12-02-02"), format = "%B")
formatDateFunction <- function(tmpDate){
#tmpMonth <- month(tmpDate, labels = TRUE)
tmpMonth <- format(tmpDate, format = "%B")
tmpYear <- year(tmpDate)
(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(as.Date("2012-01-01"))
formatDateFunction <- function(tmpDate){
#tmpMonth <- month(tmpDate, labels = TRUE)
tmpMonth <- format(tmpDate, format = "%B")
#tmpYear <- year(tmpDate)
tmpYear <- format(tmpDate, format = "%Y")
(paste(tmpMonth, tmpYear, sep = "-"))
}
formatDateFunction(as.Date("2012-01-01"))
